% !TEX encoding = UTF-8 Unicode
\level{1}{Richiesta dati al server APS} \label{app:aps}
In tale appendice è riportato il formato che devono rispettare le richieste di dati al server messo a disposizione dall'APS. Viene inoltre riportato il modo in cui tale server risponde alla nostra richiesta, ovvero il formato che i dati assumono nella risposta che si riceve.\\
La richiesta della posizione dell'autobus viene effettuata presso il server dell'APS tramite una richiesta HTTP con il seguente formato:

\begin{table}[H]
	\centering
	\begin{tabu}{| X[0.4] | X |}
		\hline
		hostname & www.apsholding.it \\ \hline
		path & /index.php/informazioni/dov-e-il-mezzo-pubblico-in-tempo-reale?option=com\_mappeaps\&view=posmezzi\&format=raw  \\ \hline
		port & 80 \\ \hline		
		method & POST \\ \hline 
		content-type & application/x-www-form-urlencoded \\ \hline
		content & l=[linea] \\ \hline
	\end{tabu}
	\caption{Richiesta dei dati al server APS}
\end{table}

La risposta dal server dell'APS è un array JSON, il quale viene definito con il tipo \texttt{Dataset}. Gli elementi dell'array sono oggetti che rappresentano un singolo autobus e hanno la seguente struttura:

\begin{table}[H]
	\centering
	\begin{tabu}{| X[0.4] | X |}
		\hline
		\rowfont{\bfseries}
		Chiave & Descrizione \\ \hline
		idMezzo & Identificativo univoco del mezzo \\ \hline
		WGS84Fi & Latitudine del mezzo \\ \hline
		WGS84La & Longitudine del mezzo \\ \hline
		Girometro & Velocità angolare del mezzo \\ \hline
		StatoPorte & Stato delle porte del mezzo \\ \hline
	\end{tabu}
	\caption{Dati ricevuti dal server APS}
\end{table}